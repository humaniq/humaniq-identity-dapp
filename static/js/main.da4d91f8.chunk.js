(this["webpackJsonphumaniq-identuty-dapp"]=this["webpackJsonphumaniq-identuty-dapp"]||[]).push([[0],{141:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return l}));var r=n(31),i=n(10),a=n(9),c=n(16),o=n.n(c),s=n(15),u=n(54),l=new(Object(i.a)((function t(){var n=this;Object(a.a)(this,t),this.initialized=!1,this.currentAccount=null,this.hasProvider=!1,this.init=Object(r.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.ethereum){e.next=16;break}return n.hasProvider=!0,window.ethereum.on("accountsChanged",(function(e){n.currentAccount=e[0]})),window.ethereum.on("disconnect",(function(){n.currentAccount=null})),window.ethereum.on("connect",(function(e){n.currentAccount=e[0]})),window.ethereum.on("message",(function(e){u.a.info("message",e)})),e.prev=6,e.next=9,window.ethereum.request({method:"eth_requestAccounts"});case 9:t=e.sent,n.currentAccount=t[0],e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),u.a.info("ERROR",e.t0);case 16:n.initialized=!0;case 17:case"end":return e.stop()}}),e,null,[[6,13]])}))),this.personalMessageRequest=function(t){return window.ethereum?window.ethereum.request({method:"personal_sign",params:["0x".concat(e.from(t,"utf-8").toString("hex")),n.currentAccount]}):null},this.connect=Object(r.a)(o.a.mark((function e(){var t,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.ethereum&&(null===(t=window.ethereum)||void 0===t||!t.currentAccount)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,window.ethereum.request({method:"eth_requestAccounts"});case 5:r=e.sent,n.currentAccount=r[0],e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),u.a.info("ERROR",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])}))),this.disconnect=function(){n.currentAccount=null},Object(s.m)(this,void 0,{autoBind:!0})})))}).call(this,n(30).Buffer)},217:function(e){e.exports=JSON.parse('{"appName":"HumaniqID","firstName":"First name","lastName":"Last name","update":"Update","profileUpdate":"Profile Update","yourProfile":"Your Profile","country":"Country","city":"City","birthDate":"Birth Date","changeAvatar":"Change Photo","loading":"Loading...","notFound":"404...Page Not Found","walletNotConnected":"Seems like your Wallet not connected","connectWallet":"Connect your Wallet","emptyField":"Field cannot be empty","logout":"Logout","disconnect":"Disconnect","connect":"Connect","notConnected":"Not connected","photoUploading":"Photo is uploading","uploading":"Uploading","userProfile":{"successUpdate":"Your profile successfully updated","errorUpdate":"Error update profile","errorSign":"Sign message was rejected","form":{"firstNameHint":"Enter your name","lastNameHint":"Enter your lastname","countryHint":"Enter your country","cityHint":"Enter your city"}}}')},237:function(e,t,n){},242:function(e,t){},245:function(e,t){},255:function(e,t){},256:function(e,t){},287:function(e,t){},289:function(e,t){},300:function(e,t){},302:function(e,t){},315:function(e,t){},317:function(e,t){},434:function(e,t,n){},435:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n(36),a=n.n(i),c=(n(237),n(52)),o=n(114),s=n(216),u=n(217);c.a.use(s.a).use(o.e).init({resources:{en:{translation:u}}}),c.a.changeLanguage("en");var l=n(31),h=n(16),f=n.n(h),p=n(437),d=n(443),b=n(444),j=n(71),O=n(445),m={primary:"#0066DA",error:"#F44336",success:"#4CAF50",warning:"#FD9900",blueOcean:"#001833",textGrey:"#9B9B9B",bg:"#F5FAFF",white:"#FFFFFF",grey:"#E0E0E0",greyLight:"#F2F3F6"},g=n(218);function y(e){if(!e)return e;var t=Object(g.toChecksumAddress)(e);return t?"".concat(t.slice(0,4),"...").concat(t.substring(t.length-4)):""}var x=n(68),v=n(7),w=Object(x.a)((function(){var e=Object(O.a)().t;return Object(v.jsxs)(p.a.Header,{style:{padding:"0 25px",textAlign:"center",backgroundColor:m.primary,color:m.white,justifyContent:"space-between",display:"flex",alignItems:"center"},children:[Object(v.jsx)("span",{style:{fontSize:22,lineHeight:24},children:e("appName")}),Pe.currentAccount?Object(v.jsx)(d.a,{overlay:Object(v.jsx)(b.a,{children:Object(v.jsx)(b.a.Item,{children:Object(v.jsx)("div",{onClick:Pe.disconnect,children:e("disconnect")})},"logout")}),placement:"bottomLeft",children:Object(v.jsx)(j.a,{type:"primary",disabled:!Pe.hasProvider,onClick:Object(l.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Pe.currentAccount){e.next=3;break}return e.next=3,Pe.connect();case 3:case"end":return e.stop()}}),e)}))),children:y(Pe.currentAccount)||e("notConnected")})}):Object(v.jsx)(j.a,{type:"primary",disabled:!Pe.hasProvider,onClick:Object(l.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Pe.currentAccount){e.next=3;break}return e.next=3,Pe.connect();case 3:case"end":return e.stop()}}),e)}))),children:y(Pe.currentAccount)||e("notConnected")})]})})),E=n(96),P=n.n(E),N=function(){var e=Object(O.a)().t;return Object(v.jsx)(p.a.Footer,{style:{textAlign:"center",backgroundColor:m.bg},children:Object(v.jsxs)("span",{children:[e("appName")," ",P()().year()]})})},A=n(230),F=n(20),R=n(439),C=n(446),k=n(438),U=n(440),D=n(442),T="DD.MM.YYYY",I=n(3),S=n(12),_=n(441),L=["title","input","onChange","error","hint"],B={borderWidth:1,borderColor:m.error},H=function(e){var t=e.title,n=e.input,r=e.onChange,i=e.error,a=e.hint,c=Object(S.a)(e,L);return Object(v.jsxs)(C.b,{direction:"vertical",align:"baseline",children:[Object(v.jsx)(U.a.Text,{children:t}),Object(v.jsx)(_.a,Object(I.a)({size:"large",placeholder:a,onChange:function(e){return r(e.target.value)},value:n,style:i?B:{}},c)),i&&Object(v.jsx)(U.a.Text,{style:{color:m.error},children:i})]})},z=n(10),W=n(9),q=n(15),G=n(115),M=n(116),Y=(n(401),function(e){return"string"!==typeof e||""===e.trim()}),J=n(54),$=n(224),V=n.n($),Z="https://signupbot.humaniq.com/api/v1",K={POST_SIGNUP_CHECK:"/introspect/signup/check",POST_SIGNUP_CONFIRM:"/introspect/signup/confirm",GET_SIGNUP_OBJECT:"/introspect/signup/object/:uid",GET_SIGNUP_PHOTO:"/introspect/signup/photo/:uid",GET_SIGNUP_WALLET:"/introspect/signup/wallet/:wallet"},X={POST_PROFILE_UPDATE:"/dapp/profile/update",POST_PROFILE_PHOTO_UPDATE:"/photo/upload"};function Q(e,t){var n=/\*{1,2}/g,r=/_!slash!_/g,i={};if(t){var a=function(a){if(t.hasOwnProperty(a)){var c=t[a];if("splat"===a){l=c,c="[object Array]"!==Object.prototype.toString.call(l)?[l]:l;var o=0;e=e.replace(n,(function(e){var t=c[o++];if(null==t)return"";var n="splat".concat(o);return i[n]="*"===e?encodeURIComponent(t):encodeURIComponent(t.toString().replace(/\//g,"_!slash!_")).replace(r,"/"),"<".concat(n,">")}))}else{var s=new RegExp("(/|\\(|\\)|^):"+a+"(/|\\)|\\(|$)");e=e.replace(s,(function(e,t,n){return i[a]=encodeURIComponent(c),"".concat(t,"<").concat(a,">").concat(n)}));var u=new RegExp("(.*):"+a+"\\?(.*)");e=e.replace(u,(function(e,t,n){return i[a]=encodeURIComponent(c),"".concat(t,"<").concat(a,">").concat(n)}))}}var l};for(var c in t)a(c)}return e.replace(/\(([^:*?#]+?)\)/g,"$1").replace(/\([^:?#]*:[^?#]*?\)/g,"").replace(/(\/[^/]*\?)/g,"").replace(/<(.*?)>/g,(function(e,t){return i[t]})).replace(/\/+/g,"/").replace(/\/+$/,"").replace(/^$/,"/")}var ee,te,ne,re,ie,ae,ce,oe=Object(z.a)((function e(){var t=this;Object(W.a)(this,e),this.axios=void 0,this.init=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.axios=V.a.create({baseURL:e,headers:n}),t.axios.interceptors.response.use((function(e){return Object(I.a)(Object(I.a)({},e),{},{isOk:!0})}),(function(e){return Promise.resolve(Object(I.a)(Object(I.a)({},e),{},{isOk:!1}))}))},this.get=function(e,n,r){return t.axios.get(Q(e,n),r)},this.post=function(e,n,r,i){return t.axios.post(r?Q(e,r):e,n,i)},this.put=function(e,n,r,i){return t.axios.put(r?Q(e,r):e,n,i)}})),se=n(228),ue=(ee=function(){function e(){var t=this;Object(W.a)(this,e),this.firstName="",this.lastName="",this.country="",this.city="",this.birthDate="",this.firstNameError=void 0,this.lastNameError=void 0,this.countryError=void 0,this.cityError=void 0,this.birthDateError=void 0,this.photoURI="",this.isFetching=!1,this.photoUploading=!1,this.api=void 0,this.setFirstName=function(e){t.firstNameError=void 0,t.firstName=e},this.setLastName=function(e){t.lastNameError=void 0,t.lastName=e},this.setCountry=function(e){t.countryError=void 0,t.country=e},this.setCity=function(e){t.cityError=void 0,t.city=e},this.setBirthDate=function(e){t.birthDateError=void 0,t.birthDate=e},this.fetchProfile=Object(l.a)(f.a.mark((function e(){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isFetching=!0,e.prev=1,e.next=4,t.api.get(K.GET_SIGNUP_WALLET,{wallet:Pe.currentAccount});case 4:(n=e.sent).isOk?t.setProfileUser(n.data):J.a.info("PROFILE FETCH ERROR",n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),J.a.info("PROFILE FETCH ERROR",e.t0);case 11:return e.prev=11,t.isFetching=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])}))),Object(G.a)(this,"uploadPhoto",te,this),Object(G.a)(this,"onSubmit",ne,this),Object(G.a)(this,"setProfileUser",re,this),Object(G.a)(this,"onReset",ie,this),this.isAnyFieldEmpty=function(){return Y(t.firstName)||Y(t.lastName)||Y(t.country)||Y(t.city)||Y(t.birthDate)},Object(q.m)(this),this.api=new oe,this.api.init(Z,{"x-auth-token":"XMaLhU75ZFklvAiV7yBZBNnlWsE9IowU"})}return Object(z.a)(e,[{key:"getBirthDate",get:function(){return Y(this.birthDate)?P()():P()(this.birthDate,T)}},{key:"buttonDisabled",get:function(){return this.isAnyFieldEmpty()}}]),e}(),te=Object(M.a)(ee.prototype,"uploadPhoto",[q.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(l.a)(f.a.mark((function t(n){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.photoUploading=!0,t.prev=1,t.next=4,e.api.post(X.POST_PROFILE_PHOTO_UPDATE,n,null,{headers:{"Content-Type":"image/png"}});case 4:(r=t.sent).isOk?e.photoURI=r.data.url:J.a.info("PHOTO UPLOAD ERROR"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),J.a.info("PHOTO UPLOAD ERROR",t.t0);case 11:return t.prev=11,e.photoUploading=!1,t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,8,11,14]])})));return function(e){return t.apply(this,arguments)}}()}}),ne=Object(M.a)(ee.prototype,"onSubmit",[q.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(l.a)(f.a.mark((function t(){var n,r,i,a,o;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Y(e.firstName)&&(e.firstNameError=Object(c.b)("emptyField")),Y(e.lastName)&&(e.lastNameError=Object(c.b)("emptyField")),Y(e.country)&&(e.countryError=Object(c.b)("emptyField")),Y(e.city)&&(e.cityError=Object(c.b)("emptyField")),Y(e.birthDate)&&(e.birthDateError=Object(c.b)("emptyField")),!e.isAnyFieldEmpty()){t.next=7;break}return t.abrupt("return");case 7:return n=(new Date).getTime(),r="ADDRESS ".concat(Pe.currentAccount," UPDATE PERSONAL INFO TIMESTAMP ").concat(n),t.prev=9,t.next=12,Pe.personalMessageRequest(r);case 12:if(!(i=t.sent)){t.next=19;break}return a={query:{addressFrom:Pe.currentAccount,timeStamp:n,typeOperation:"UPSERT",typeMessage:"humaniqIdentity",payload:{lastName:e.lastName,firstName:e.firstName,birthDate:e.birthDate,city:e.city,country:e.country,photoUrl:e.photoURI}},signature:i},t.next=17,e.api.post(X.POST_PROFILE_UPDATE,a);case 17:(o=t.sent).isOk?se.b.success(Object(c.b)("userProfile.successUpdate")):(se.b.error(Object(c.b)("userProfile.errorUpdate")),J.a.info("ERROR",o));case 19:t.next=25;break;case 21:t.prev=21,t.t0=t.catch(9),se.b.error(Object(c.b)("userProfile.errorSign")),J.a.info(t.t0);case 25:case"end":return t.stop()}}),t,null,[[9,21]])})))}}),re=Object(M.a)(ee.prototype,"setProfileUser",[q.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.firstName=t.firstName,e.lastName=t.lastName,e.country=t.country,e.city=t.city,e.birthDate=t.birthDate,e.photoURI=t.photoURI}}}),ie=Object(M.a)(ee.prototype,"onReset",[q.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.firstName="",e.lastName="",e.country="",e.city="",e.birthDate="",e.photoURI=""}}}),ee),le=new ue,he=n(141),fe=Object(z.a)((function e(){var t=this;Object(W.a)(this,e),this.galleryRef=void 0,this.init=function(){var e=Object(l.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.galleryRef=n,e.next=3,le.fetchProfile();case 3:Object(q.p)((function(){return he.a.currentAccount}),function(){var e=Object(l.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,le.fetchProfile();case 3:e.next=6;break;case 5:le.onReset();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.openFileExplorer=function(){var e,n;null===(e=t.galleryRef)||void 0===e||null===(n=e.current)||void 0===n||n.click()},this.onFileChoose=function(){var e=Object(l.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.target.files[0],e.next=4,le.uploadPhoto(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Object(q.n)(this,{},{autoBind:!0})})),pe=n(225),de=n.n(pe),be=n(227),je=(n(436),Object(be.b)(de.a)),Oe=n(64),me=(ae=fe,ce=Object(x.a)((function(e){var t=e.store,n=Object(O.a)().t,i=Object(r.useRef)();return Object(r.useEffect)((function(){Object(l.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.init(i);case 2:case"end":return e.stop()}}),e)})))()}),[t]),le.isFetching?Object(v.jsx)(R.a,{style:{display:"flex",flex:1,alignItems:"center",justifyContent:"center",minWidth:300,borderWidth:0},children:Object(v.jsxs)(C.b,{direction:"horizontal",children:[Object(v.jsx)(k.a,{}),Object(v.jsx)(U.a.Title,{level:3,children:n("loading")})]})}):Object(v.jsx)(Oe.a,{children:Object(v.jsx)("div",{style:{textAlign:"center",margin:24,borderWidth:0},children:Object(v.jsxs)(C.b,{direction:"vertical",children:[Object(v.jsx)(U.a.Title,{level:1,children:n("yourProfile")}),le.photoUploading?Object(v.jsx)(C.b,{align:"center",style:{width:100,height:100,alignItems:"center",justifyContent:"center"},children:Object(v.jsx)(k.a,{size:"large"})}):Object(v.jsx)(D.a,{size:100,src:le.photoURI}),Object(v.jsx)("input",{type:"file",ref:i,onChange:t.onFileChoose,hidden:!0}),Object(v.jsx)(j.a,{onClick:t.openFileExplorer,size:"middle",style:{marginBottom:10},type:"primary",color:m.textGrey,loading:le.photoUploading,disabled:le.photoUploading,children:le.photoUploading?n("uploading"):n("changeAvatar")}),Object(v.jsx)(H,{title:n("firstName"),input:le.firstName,onChange:le.setFirstName,error:le.firstNameError,hint:n("userProfile.form.firstNameHint")}),Object(v.jsx)(H,{title:n("lastName"),input:le.lastName,onChange:le.setLastName,error:le.lastNameError,hint:n("userProfile.form.lastNameHint")}),Object(v.jsx)(H,{title:n("country"),input:le.country,onChange:le.setCountry,error:le.countryError,hint:n("userProfile.form.countryHint")}),Object(v.jsx)(H,{title:n("city"),input:le.city,onChange:le.setCity,error:le.cityError,hint:n("userProfile.form.cityHint")}),Object(v.jsxs)(C.b,{direction:"vertical",size:12,children:[Object(v.jsx)(U.a.Text,{children:n("birthDate")}),Object(v.jsx)(je,{onChange:function(e,t){le.setBirthDate(t)},style:le.birthDateError?{borderWidth:1,borderColor:m.error}:{},defaultValue:le.getBirthDate,format:T})]}),Object(v.jsx)(j.a,{onClick:le.onSubmit,size:"large",style:{marginTop:30,width:"100%"},type:"primary",children:n("update")})]})})})})),function(e){var t=Object.assign({},e),n=Object(r.useMemo)((function(){return new ae}),[]);return Object(v.jsx)(ce,Object(I.a)({store:n},t))}),ge=(n(433),n(434),{home:{path:"/"}}),ye=function(){return Object(v.jsx)("div",{className:"home-card"})},xe=n(30),ve=n.n(xe),we=Object(x.a)((function(){var e=Object(O.a)().t;return Object(v.jsxs)(p.a,{style:{textAlign:"center",display:"flex",flex:1,alignItems:"center",justifyContent:"center",minWidth:300,marginBottom:24,borderWidth:0,marginRight:30,marginLeft:30},children:[Object(v.jsx)(U.a.Title,{level:3,children:e("walletNotConnected")}),Object(v.jsx)(j.a,{onClick:Pe.connect,size:"large",style:{marginTop:30,width:"100%",height:60},type:"primary",children:e("connectWallet")})]})})),Ee=function(){var e=Object(O.a)().t;return Object(v.jsx)(p.a,{style:{display:"flex",flex:1,alignItems:"center",justifyContent:"center",minWidth:300,marginBottom:24,borderWidth:0},children:Object(v.jsx)(U.a.Title,{level:3,children:e("notFound")})})};window.Buffer=ve.a.Buffer;var Pe=he.a,Ne=Object(x.a)((function(){return Object(r.useEffect)((function(){Object(l.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe.init();case 2:case"end":return e.stop()}}),e)})))()}),[]),Object(v.jsxs)(p.a,{className:"App",children:[Object(v.jsx)(w,{}),Pe.initialized?Object(v.jsx)(v.Fragment,{children:Pe.hasProvider?Object(v.jsx)(v.Fragment,{children:Pe.currentAccount?Object(v.jsx)(A.a,{children:Object(v.jsxs)(F.c,{children:[Object(v.jsx)(F.a,{path:ge.home.path,element:Object(v.jsx)(me,{})}),Object(v.jsx)(F.a,{path:"*",element:Object(v.jsx)(ye,{})})]})}):Object(v.jsx)(we,{})}):Object(v.jsx)(Ee,{})}):null,Object(v.jsx)(N,{})]})}));Object(q.g)({enforceActions:"never"}),a.a.render(Object(v.jsx)(Ne,{}),document.getElementById("root"))},54:function(e,t,n){"use strict";var r=n(9),i=n(10),a=function(){function e(){Object(r.a)(this,e)}return Object(i.a)(e,null,[{key:"log",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];console.log(e,n)}},{key:"debug",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];console.debug(e,n)}},{key:"error",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];console.error(e,t,r)}},{key:"info",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];console.info(e,n)}},{key:"warning",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];console.warn(e,n)}}]),e}();t.a=a}},[[435,1,2]]]);
//# sourceMappingURL=main.da4d91f8.chunk.js.map