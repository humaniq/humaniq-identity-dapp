(this["webpackJsonphumaniq-identuty-dapp"]=this["webpackJsonphumaniq-identuty-dapp"]||[]).push([[0],{138:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return l}));var r=n(31),i=n(9),c=n(8),a=n(16),o=n.n(a),s=n(15),u=n(59),l=new(Object(i.a)((function t(){var n=this;Object(c.a)(this,t),this.initialized=!1,this.currentAccount=null,this.hasProvider=!1,this.init=Object(r.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.ethereum){e.next=16;break}return n.hasProvider=!0,window.ethereum.on("accountsChanged",(function(e){n.currentAccount=e[0]})),window.ethereum.on("disconnect",(function(){n.currentAccount=null})),window.ethereum.on("connect",(function(e){n.currentAccount=e[0]})),window.ethereum.on("message",(function(e){u.a.info("message",e)})),e.prev=6,e.next=9,window.ethereum.request({method:"eth_requestAccounts"});case 9:t=e.sent,n.currentAccount=t[0],e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),u.a.info("ERROR",e.t0);case 16:n.initialized=!0;case 17:case"end":return e.stop()}}),e,null,[[6,13]])}))),this.personalMessageRequest=function(t){return window.ethereum?window.ethereum.request({method:"personal_sign",params:["0x".concat(e.from(t,"utf-8").toString("hex")),n.currentAccount]}):null},this.connect=Object(r.a)(o.a.mark((function e(){var t,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.ethereum&&(null===(t=window.ethereum)||void 0===t||!t.currentAccount)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,window.ethereum.request({method:"eth_requestAccounts"});case 5:r=e.sent,n.currentAccount=r[0],e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),u.a.info("ERROR",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])}))),this.disconnect=function(){n.currentAccount=null},Object(s.m)(this,void 0,{autoBind:!0})})))}).call(this,n(30).Buffer)},217:function(e){e.exports=JSON.parse('{"appName":"Humaniq Identity dAPP","firstName":"First name","lastName":"Last name","update":"Update","profileUpdate":"Profile Update","yourProfile":"Your Profile","country":"Country","city":"City","birthDate":"Birth Date","changeAvatar":"Change Avatar","loading":"Loading...","notAllowed":"Not allowed. Sorry...","walletNotConnected":"Seems like your Wallet not connected","connectWallet":"Connect your Wallet with this dApp","emptyField":"Field cannot be empty","userProfile":{"successUpdate":"Your profile successfully updated","errorUpdate":"Error update profile","errorSign":"Sign message was rejected"}}')},237:function(e,t,n){},242:function(e,t){},245:function(e,t){},255:function(e,t){},256:function(e,t){},287:function(e,t){},289:function(e,t){},300:function(e,t){},302:function(e,t){},315:function(e,t){},317:function(e,t){},434:function(e,t,n){},435:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n(36),c=n.n(i),a=(n(237),n(52)),o=n(112),s=n(216),u=n(217);a.a.use(s.a).use(o.e).init({resources:{en:{translation:u}}}),a.a.changeLanguage("en");var l=n(31),h=n(16),f=n.n(h),p=n(437),b=n(443),d=n(444),j=n(70),m=n(445),O={primary:"#0066DA",error:"#F44336",success:"#4CAF50",warning:"#FD9900",blueOcean:"#001833",textGrey:"#9B9B9B",bg:"#F5FAFF",white:"#FFFFFF",grey:"#E0E0E0",greyLight:"#F2F3F6"},y=n(218);function g(e){if(!e)return e;var t=Object(y.toChecksumAddress)(e);return t?"".concat(t.slice(0,4),"...").concat(t.substring(t.length-4)):""}var x=n(10),v=function(){var e=Object(m.a)().t;return Object(x.jsxs)(p.a.Header,{style:{textAlign:"center",backgroundColor:O.primary,color:O.white,justifyContent:"space-between",display:"flex",alignItems:"center"},children:[Object(x.jsx)("span",{style:{fontSize:22},children:e("appName")}),xe.currentAccount?Object(x.jsx)(b.a,{overlay:Object(x.jsx)(d.a,{children:Object(x.jsx)(d.a.Item,{children:Object(x.jsx)("div",{onClick:xe.disconnect,children:"logout"})},"logout")}),placement:"bottomLeft",children:Object(x.jsx)(j.a,{type:"primary",disabled:!xe.hasProvider,onClick:Object(l.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(xe.currentAccount){e.next=3;break}return e.next=3,xe.connect();case 3:case"end":return e.stop()}}),e)}))),children:g(xe.currentAccount)||"not connected"})}):Object(x.jsx)(j.a,{type:"primary",disabled:!xe.hasProvider,onClick:Object(l.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(xe.currentAccount){e.next=3;break}return e.next=3,xe.connect();case 3:case"end":return e.stop()}}),e)}))),children:g(xe.currentAccount)||"not connected"})]})},w=n(95),E=n.n(w),N=function(){return Object(x.jsx)(p.a.Footer,{style:{textAlign:"center",backgroundColor:O.bg},children:Object(x.jsxs)("span",{children:["Humaniq dApps React Boilerplate \xa9 ",E()().year()]})})},k=n(230),A=n(20),C=n(139),F=n(439),P=n(446),R=n(438),D=n(440),U=n(442),I="DD.MM.YYYY",S=n(441),T={borderWidth:1,borderColor:O.error},_=function(e){var t=e.title,n=e.input,r=e.onChange,i=e.error;return Object(x.jsxs)(P.b,{direction:"vertical",align:"baseline",children:[Object(x.jsx)(D.a.Text,{children:t}),Object(x.jsx)(S.a,{size:"large",onChange:function(e){return r(e.target.value)},value:n,style:i?T:{}}),i&&Object(x.jsx)(D.a.Text,{style:{color:O.error},children:i})]})},B=n(9),L=n(8),W=n(15),q=n(59),z=n(146),G=n(147),M=(n(401),function(e){return"string"!==typeof e||""===e.trim()}),Y=n(3),H=n(224),J=n.n(H),$="https://signupbot.humaniq.com/api/v1",V={POST_SIGNUP_CHECK:"/introspect/signup/check",POST_SIGNUP_CONFIRM:"/introspect/signup/confirm",GET_SIGNUP_OBJECT:"/introspect/signup/object/:uid",GET_SIGNUP_PHOTO:"/introspect/signup/photo/:uid",GET_SIGNUP_WALLET:"/introspect/signup/wallet/:wallet"},Z={POST_PROFILE_UPDATE:"/dapp/profile/update"};function K(e,t){var n=/\*{1,2}/g,r=/_!slash!_/g,i={};if(t){var c=function(c){if(t.hasOwnProperty(c)){var a=t[c];if("splat"===c){l=a,a="[object Array]"!==Object.prototype.toString.call(l)?[l]:l;var o=0;e=e.replace(n,(function(e){var t=a[o++];if(null==t)return"";var n="splat".concat(o);return i[n]="*"===e?encodeURIComponent(t):encodeURIComponent(t.toString().replace(/\//g,"_!slash!_")).replace(r,"/"),"<".concat(n,">")}))}else{var s=new RegExp("(/|\\(|\\)|^):"+c+"(/|\\)|\\(|$)");e=e.replace(s,(function(e,t,n){return i[c]=encodeURIComponent(a),"".concat(t,"<").concat(c,">").concat(n)}));var u=new RegExp("(.*):"+c+"\\?(.*)");e=e.replace(u,(function(e,t,n){return i[c]=encodeURIComponent(a),"".concat(t,"<").concat(c,">").concat(n)}))}}var l};for(var a in t)c(a)}return e.replace(/\(([^:*?#]+?)\)/g,"$1").replace(/\([^:?#]*:[^?#]*?\)/g,"").replace(/(\/[^/]*\?)/g,"").replace(/<(.*?)>/g,(function(e,t){return i[t]})).replace(/\/+/g,"/").replace(/\/+$/,"").replace(/^$/,"/")}var X,Q,ee,te,ne,re,ie=Object(B.a)((function e(){var t=this;Object(L.a)(this,e),this.axios=void 0,this.init=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.axios=J.a.create({baseURL:e,headers:n}),t.axios.interceptors.response.use((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{isOk:!0})}),(function(e){return Promise.resolve(Object(Y.a)(Object(Y.a)({},e),{},{isOk:!1}))}))},this.get=function(){var e=Object(l.a)(f.a.mark((function e(n,r,i){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.axios.get(K(n,r),i));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),this.post=function(){var e=Object(l.a)(f.a.mark((function e(n,r,i,c){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.axios.post(i?K(n,i):n,r,c));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()})),ce=n(228),ae=new(X=function(){function e(){var t=this;Object(L.a)(this,e),this.firstName="",this.lastName="",this.country="",this.city="",this.birthDate="",this.firstNameError=void 0,this.lastNameError=void 0,this.countryError=void 0,this.cityError=void 0,this.birthDateError=void 0,this.photoURI="",this.isFetching=!1,this.api=void 0,this.setFirstName=function(e){t.firstNameError=void 0,t.firstName=e},this.setLastName=function(e){t.lastNameError=void 0,t.lastName=e},this.setCountry=function(e){t.countryError=void 0,t.country=e},this.setCity=function(e){t.cityError=void 0,t.city=e},this.setBirthDate=function(e){t.birthDateError=void 0,t.birthDate=e},this.fetchProfile=Object(l.a)(f.a.mark((function e(){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isFetching=!0,e.next=3,t.api.get(V.GET_SIGNUP_WALLET,{wallet:xe.currentAccount});case 3:(n=e.sent).isOk?t.setProfileUser(n.data):q.a.info("ERROR",n),t.isFetching=!1;case 6:case"end":return e.stop()}}),e)}))),Object(z.a)(this,"onSubmit",Q,this),Object(z.a)(this,"setProfileUser",ee,this),Object(z.a)(this,"onReset",te,this),this.isAnyFieldEmpty=function(){return M(t.firstName)||M(t.lastName)||M(t.country)||M(t.city)||M(t.birthDate)},Object(W.m)(this),this.api=new ie,this.api.init($,{"x-auth-token":"XMaLhU75ZFklvAiV7yBZBNnlWsE9IowU"})}return Object(B.a)(e,[{key:"getBirthDate",get:function(){return M(this.birthDate)?E()():E()(this.birthDate,I)}},{key:"buttonDisabled",get:function(){return this.isAnyFieldEmpty()}}]),e}(),Q=Object(G.a)(X.prototype,"onSubmit",[W.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(l.a)(f.a.mark((function t(){var n,r,i,c,o;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(M(e.firstName)&&(e.firstNameError=Object(a.b)("emptyField")),M(e.lastName)&&(e.lastNameError=Object(a.b)("emptyField")),M(e.country)&&(e.countryError=Object(a.b)("emptyField")),M(e.city)&&(e.cityError=Object(a.b)("emptyField")),M(e.birthDate)&&(e.birthDateError=Object(a.b)("emptyField")),!e.isAnyFieldEmpty()){t.next=7;break}return t.abrupt("return");case 7:return n=(new Date).getTime(),r="ADDRESS ".concat(xe.currentAccount," UPDATE PERSONAL INFO TIMESTAMP ").concat(n),t.prev=9,t.next=12,xe.personalMessageRequest(r);case 12:if(!(i=t.sent)){t.next=19;break}return c={query:{addressFrom:xe.currentAccount,timeStamp:n,typeOperation:"UPSERT",typeMessage:"humaniqIdentity",payload:{lastName:e.lastName,firstName:e.firstName,birthDate:e.birthDate,city:e.city,country:e.country}},signature:i},t.next=17,e.api.post(Z.POST_PROFILE_UPDATE,c);case 17:(o=t.sent).isOk?ce.b.success(Object(a.b)("userProfile.successUpdate")):(ce.b.error(Object(a.b)("userProfile.errorUpdate")),q.a.info("ERROR",o));case 19:t.next=25;break;case 21:t.prev=21,t.t0=t.catch(9),ce.b.error(Object(a.b)("userProfile.errorSign")),q.a.info(t.t0);case 25:case"end":return t.stop()}}),t,null,[[9,21]])})))}}),ee=Object(G.a)(X.prototype,"setProfileUser",[W.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.firstName=t.firstName,e.lastName=t.lastName,e.country=t.country,e.city=t.city,e.birthDate=t.birthDate,e.photoURI=t.photoURI}}}),te=Object(G.a)(X.prototype,"onReset",[W.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.firstName="",e.lastName="",e.country="",e.city="",e.birthDate="",e.photoURI=""}}}),X),oe=n(138),se=Object(B.a)((function e(){var t=this;Object(L.a)(this,e),this.galleryRef=void 0,this.init=function(){var e=Object(l.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.galleryRef=n,e.next=3,ae.fetchProfile();case 3:Object(W.p)((function(){return oe.a.currentAccount}),function(){var e=Object(l.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,ae.fetchProfile();case 3:e.next=6;break;case 5:ae.onReset();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.openFileExplorer=function(){var e,n;null===(e=t.galleryRef)||void 0===e||null===(n=e.current)||void 0===n||n.click()},this.onFileChoose=function(e){e.preventDefault();var t=e.target.files[0];q.a.log("file...",t)},Object(W.m)(this,{},{autoBind:!0})})),ue=n(225),le=n.n(ue),he=n(227),fe=(n(436),Object(he.b)(le.a)),pe=n(64),be=(ne=se,re=Object(C.a)((function(e){var t=e.store,n=Object(m.a)().t,i=Object(r.useRef)();return Object(r.useEffect)((function(){Object(l.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.init(i);case 2:case"end":return e.stop()}}),e)})))()}),[t]),ae.isFetching?Object(x.jsx)(F.a,{style:{display:"flex",flex:1,alignItems:"center",justifyContent:"center",minWidth:300,borderWidth:0},children:Object(x.jsxs)(P.b,{direction:"horizontal",children:[Object(x.jsx)(R.a,{}),Object(x.jsx)(D.a.Title,{level:3,children:n("loading")})]})}):Object(x.jsx)(pe.a,{children:Object(x.jsx)("div",{style:{textAlign:"center",margin:24,borderWidth:0},children:Object(x.jsxs)(P.b,{direction:"vertical",children:[Object(x.jsx)(D.a.Title,{level:1,children:n("yourProfile")}),Object(x.jsx)(U.a,{size:100,src:ae.photoURI}),Object(x.jsx)(_,{title:n("firstName"),input:ae.firstName,onChange:ae.setFirstName,error:ae.firstNameError}),Object(x.jsx)(_,{title:n("lastName"),input:ae.lastName,onChange:ae.setLastName,error:ae.lastNameError}),Object(x.jsx)(_,{title:n("country"),input:ae.country,onChange:ae.setCountry,error:ae.countryError}),Object(x.jsx)(_,{title:n("city"),input:ae.city,onChange:ae.setCity,error:ae.cityError}),Object(x.jsxs)(P.b,{direction:"vertical",size:12,children:[Object(x.jsx)(D.a.Text,{children:n("birthDate")}),Object(x.jsx)(fe,{onChange:function(e,t){ae.setBirthDate(t)},style:ae.birthDateError?{borderWidth:1,borderColor:O.error}:{},defaultValue:ae.getBirthDate,format:I})]}),Object(x.jsx)(j.a,{onClick:ae.onSubmit,size:"large",style:{marginTop:30,width:"100%"},type:"primary",children:n("update")})]})})})})),function(e){var t=Object.assign({},e),n=Object(r.useMemo)((function(){return new ne}),[]);return Object(x.jsx)(re,Object(Y.a)({store:n},t))}),de=(n(433),n(434),{home:{path:"/"}}),je=function(){return Object(x.jsx)("div",{className:"home-card"})},me=n(30),Oe=n.n(me),ye=function(e){var t=e.onClick,n=Object(m.a)().t;return Object(x.jsxs)(p.a,{style:{textAlign:"center",display:"flex",flex:1,alignItems:"center",justifyContent:"center",minWidth:300,marginBottom:24,borderWidth:0,marginRight:30,marginLeft:30},children:[Object(x.jsx)(D.a.Title,{level:3,children:n("walletNotConnected")}),Object(x.jsx)(j.a,{onClick:t,size:"large",style:{marginTop:30,width:"100%",height:60},type:"primary",children:n("connectWallet")})]})},ge=function(){var e=Object(m.a)().t;return Object(x.jsx)(p.a,{style:{display:"flex",flex:1,alignItems:"center",justifyContent:"center",minWidth:300,marginBottom:24,borderWidth:0},children:Object(x.jsx)(D.a.Title,{level:3,children:e("notAllowed")})})};window.Buffer=Oe.a.Buffer;var xe=oe.a,ve=Object(C.a)((function(){return Object(r.useEffect)((function(){Object(l.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe.init();case 2:case"end":return e.stop()}}),e)})))()}),[]),Object(x.jsxs)(p.a,{className:"App",children:[Object(x.jsx)(v,{}),xe.initialized?Object(x.jsx)(x.Fragment,{children:xe.hasProvider?Object(x.jsx)(x.Fragment,{children:xe.currentAccount?Object(x.jsx)(k.a,{children:Object(x.jsxs)(A.c,{children:[Object(x.jsx)(A.a,{path:de.home.path,element:Object(x.jsx)(be,{})}),Object(x.jsx)(A.a,{path:"*",element:Object(x.jsx)(je,{})})]})}):Object(x.jsx)(ye,{onClick:xe.connect})}):Object(x.jsx)(ge,{})}):null,Object(x.jsx)(N,{})]})}));Object(W.g)({enforceActions:"never"}),c.a.render(Object(x.jsx)(ve,{}),document.getElementById("root"))},59:function(e,t,n){"use strict";var r=n(8),i=n(9),c=function(){function e(){Object(r.a)(this,e)}return Object(i.a)(e,null,[{key:"log",value:function(e){console.log(e)}},{key:"debug",value:function(e){console.debug(e)}},{key:"error",value:function(e,t){console.error(e,t)}},{key:"info",value:function(e){console.info(e)}},{key:"warning",value:function(e){console.warn(e)}}]),e}();t.a=c}},[[435,1,2]]]);
//# sourceMappingURL=main.548a51a8.chunk.js.map